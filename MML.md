# MML

MML(мямля) - Message Metric Language, язык разметки сообщений.

### Цель создания и использования

Задачи языка в текстовом виде задать форматирование текста сообщений чата. Помимо основных способов форматирования текста
(жирность, курсив, ссылка, кнопка) язык должен определять способ анимацию текста (добавление, стирание, задержки), а потенциально
позволять анимацию векторной графики.

### Текущий синтаксис

* $ - открывающий тег
* ^ - закрывающий тег
* : - разделитель между названием тега, атрибутами и содержимым

Атрибуты не именуются. Они как параметры функции просто перечисляются.


##### Пример тега ссылки внутри сообщения
```
Замыкание - это $l:01:Что такое функция?:функция^ и внешние переменные.
```
`l` - имя тега (alias link)
`01` - id тега ответа
`Что такое функция?` - сообщение, который появится при нажатии на ссылку, как вопрос.
`функция` - текст сообщения, который подвергнется форматированию в виде ссылки.

По задумке чат обратится к базе по id и достанет ответ. Диалог чата в результате будет следующего вида:

```
- Замыкание - это функция и внешние переменные.
- Что такое функция?
- Функция - это набор инструкций, которые выполняются при вызове функции.`
```
Если атрибут отсутствует, то между разделителями ничего не ставится
##### Пример тега с отсутствующим атрибутом
```
Замыкание - это $l:01::функция^ и внешние переменные.
```
Если отсутствующий атрибут в конце списка, то разделители можно опустить
##### Пример тега с отсутствующим атрибутом и разделителем
```
Замыкание - это $l:01:функция^ и внешние переменные.
```
Парсер находит открывающий и закрывающий тег, делает сплит содержимого по разделителю.
Первый элемент - это имя тега, последний - это содержимое. Остальные элементы это атрибуты в порядке
их описания в документации.
Для большого числа атрибутов следует учесть синтаксис внутри атрибута с проставкой номера.
Идея происходит из оформления enum, где все значения автоматически нумеруются

```
enum EMyEnum {
  ZERO,
  ONE,
  FOUR = 4,
  FIVE,
}
```

Синтаксис увеличения порядка атрибута может быть таким:
4=
Что ограничивает использование знака = во всех других случаях.
##### Пример тега с пропущенным 1-ым атрибутом и использованием пустых разделителей
```
$l::Что?:Вопрос без ответа^
```
##### Пример тега с пропущенным 1-ым атрибутом и использованием увеличения порядка второго
```
$l:2=Что?:Вопрос без ответа^
```

Получается, что увеличение порядка для каждого атрибута не должен ломать синтаксис

##### Пример, где атрибуты не пропущены, но использованы правильные порядки
```
$l:1=01:2=Что?:Вопрос с ответом^
```
Для содержимого не нужна нумерация, так как оно всегда идет последним

##### Пример неправильного увеличения порядка для содержимого
```
$l:3=Вопрос без ответа^
```
В этом случае в чате будет сообщение:
```
- 3=Вопрос без ответа
```

## Версия 0.0.1

1. придумана замена HTML тегам с атрибутами и содержимым 
    `<a href='01'>link</a>`
станет
`$l:01:link^`
2. 